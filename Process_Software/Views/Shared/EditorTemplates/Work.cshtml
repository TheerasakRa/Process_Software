@model Process_Software.Models.Work

@{
    List<SelectListItem> StatusDropdownList = ViewBag.StatusDropdownList;
    List<SelectListItem> UserProviserDropdownList = ViewBag.UserProviserDropdownList;
}


@Html.HiddenFor(m => m.ProvidersID)
@Html.HiddenFor(m => m.IsSelectAllItem)
@Html.HiddenFor(m => m.ID)
@Html.HiddenFor(m => m.HeaderID)
@Html.HiddenFor(m => m.CreateBy)

<div>
    @Html.EditorFor(m => m.Provider, new { htmlAttributes = new { @class = "form-control" } })
</div>

<tr class="text-center table-success" style=" text-align:center; vertical-align:middle;">
    <td style=" min-width:150px;">
        @Html.ValueFor(model => model.CreateDate, "{0:dd/MM/yyyy}")
    </td>
    <td style="min-width:100px;">
        <input asp-for="Project" class="form-control" required />
    </td>
    <td style="min-width:100px;">
        <input asp-for="Name" class="form-control" required />
    </td>
    <td style="min-width:100px;">
        <input asp-for="DueDate" class="form-control" id="duedateID" />
    </td>
    <td style="min-width:100px;">
        @foreach (var item in UserProviserDropdownList)
        {
            if (Model.CreateBy == int.Parse(item.Value))
            {
                <span>@item.Text</span>
            }
        }
    </td>
    <td style="min-width:100px;">
        <select id="select-tops-options" asp-items="UserProviserDropdownList" class="require" multiple required></select>
    </td>
    <td style="min-width:100px; ">
        @if (Model.ID == ViewBag.WorkIDs)
        {
            <select asp-for="StatusID" asp-items="StatusDropdownList" class="form-control custom-dropdown" style="text-align:center; min-width:160px; "></select>
        }
        else
        {
            <select asp-for="StatusID" id="Status" asp-items="StatusDropdownList" class="form-control" style="text-align:center; min-width:160px; " disabled></select>
            <select asp-for="StatusID" id="Status2" asp-items="StatusDropdownList" class="form-control" style="text-align:center; min-width:160px; " hidden></select>
        }
    </td>
    <td style="min-width:100px;">
        <input asp-for="Remark" class="form-control" />
    </td>
    <td>
        <input type="submit" value="submit" class="btn btn-outline-success" />
    </td>
</tr>

<div class="d-flex justify-content-end align-content-center">
    <a asp-action="Index" class="btn btn-secondary">Close</a>
</div>
<br />

<script>
    document.getElementById("duedateID").addEventListener("change", function () {
        var newDueDate = document.getElementById("duedateID").value;
        document.getElementById("Status").value = document.getElementById("Status2").value = newDueDate === "" ? 1 : 2;
    });

</script>
<style>
    .custom-dropdown {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url('data:image/svg+xml;utf8,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="%23343a40"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>');
        background-repeat: no-repeat;
        background-position: right 5px top 50%;
        padding-right: 25px;
        background-size: 16px;
    }
</style>